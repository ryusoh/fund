name: Sync Analysis Configs

on:
    workflow_dispatch:
    schedule:
        - cron: '45 7 * * 1-5'

concurrency:
    group: ${{ github.workflow }}
    cancel-in-progress: true

jobs:
    sync:
        runs-on: ubuntu-latest
        steps:
            - name: Checkout
              uses: actions/checkout@v6
              with:
                  fetch-depth: 0
            - name: Set up Python
              uses: actions/setup-python@v6
              with:
                  python-version: '3.11'
            - name: Install dependencies
              run: pip install yfinance
            - name: Run sync script
              run: |
                  python scripts/analysis/sync_configs.py
            - name: Commit changes
              uses: stefanzweifel/git-auto-commit-action@v7
              with:
                  commit_message: 'chore(data): 分析構成を自動更新 [skip ci]'
